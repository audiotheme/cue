/*!
 * jquery.cue.js - 1.0.0
 * Playlist and other functionality for MediaElement.js
 * http://audiotheme.com/
 *
 * Copyright 2014, AudioTheme LLC
 * License: GPL-2.0+
 */
window.cue=window.cue||{},function(a,b){"use strict";var c=b(a);cue.l10n=b.extend({nextTrack:"Next Track",previousTrack:"Previous Track",togglePlaylist:"Toggle Playlist"},cue.l10n||{}),cue.settings=cue.settings||{},mejs.plugins.silverlight[0].types.push("audio/x-ms-wma"),b.extend(mejs.MepDefaults,{cueResponsiveProgress:!1,cueSkin:""}),b.fn.cuePlaylist=function(a){var c=b.extend(b.fn.cuePlaylist.defaults,a);return c.cueSelectors=b.extend({},mejs.MepDefaults.cueSelectors,{playlist:this.selector,track:".cue-track"}),"object"==typeof a&&"cueSelectors"in a&&b.extend(c.cueSelectors,a.cueSelectors),this.each(function(){var d,e,f,g=b(this),h=g.find(".cue-audio, audio").first(),i=g.find(".cue-playlist-data, script");if(i.length&&(d=b.parseJSON(i.first().html()),("undefined"==typeof a||"undefined"==typeof a.cuePlaylistTracks)&&"tracks"in d&&(c.cuePlaylistTracks=d.tracks)),c.cuePlaylistTracks.length){if(f=c.cuePlaylistTracks.length,g.addClass("cue-tracks-count-"+f),!h.length)for(e=0;f>e;e++)if(""!==c.cuePlaylistTracks[e].src){h=b("<audio />",{src:c.cuePlaylistTracks[e].src}).prependTo(g);break}h.mediaelementplayer(c)}})},b.fn.cuePlaylist.defaults={autosizeProgress:!1,cuePlaylistLoop:!0,cuePlaylistTracks:[],cueSkin:"cue-skin-default",defaultAudioHeight:0,enableAutosize:!1,features:["cueartwork","cuecurrentdetails","cueprevioustrack","playpause","cuenexttrack","progress","current","duration","cueplaylist"],success:function(a,d,e){var f=b(a),g=e.container.closest(e.options.cueSelectors.playlist);""!==e.options.cueSkin&&e.changeSkin(e.options.cueSkin),e.options.cueResponsiveProgress&&c.on("resize.cue",function(){e.controls.find(".mejs-time-rail").width("100%")}).trigger("resize.cue"),f.on("play.cue",function(){g.addClass("is-playing")}).on("pause.cue",function(){g.removeClass("is-playing")}),g.trigger("success.cue",[a,d,e])},timeAndDurationSeparator:'<span class="mejs-time-separator"> / </span>'}}(this,jQuery),function(a,b){"use strict";b.extend(MediaElementPlayer.prototype,{buildcueartwork:function(a,b,c){var d=c.append('<span class="mejs-track-artwork"><img src=""></span>').find(".mejs-track-artwork");a.$node.on("setTrack.cue",function(a,b){b.thumb=b.thumb||{},d.find("img").attr("src",b.thumb.src).toggle("undefined"!=typeof b.thumb.src&&""!==b.thumb.src)})}})}(this,jQuery),function(a,b){"use strict";b.extend(MediaElementPlayer.prototype,{buildcuecurrentdetails:function(a,b,c){var d,e;c.append('<div class="mejs-track-details"><span class="mejs-track-artist"></span><span class="mejs-track-title"></span></div>'),d=c.find(".mejs-track-artist"),e=c.find(".mejs-track-title"),a.$node.on("setTrack.cue",function(a,b){b.meta=b.meta||{},b.title=b.title||{},d.html(b.meta.artist),e.html(b.title)})}})}(this,jQuery),function(a,b){"use strict";b.extend(MediaElementPlayer.prototype,{buildcuenexttrack:function(a,c){b('<div class="mejs-button mejs-next-button mejs-next"><button type="button" aria-controls="'+a.id+'" title="'+cue.l10n.nextTrack+'"></button></div>').appendTo(c).on("click.cue",function(){a.cuePlayNextTrack()})},cuePlayNextTrack:function(){var a=this,b=a.cueCurrentTrack+1>=a.options.cuePlaylistTracks.length?0:a.cueCurrentTrack+1;(a.options.cuePlaylistLoop||0!==b)&&(a.$node.trigger("nextTrack.cue",a),a.cueSetCurrentTrack(b))}})}(this,jQuery),function(a,b){"use strict";var c;b.extend(mejs.MepDefaults,{cuePlaylistLoop:!0,cuePlaylistTracks:[],cueSelectors:{playlist:".cue-playlist",track:".cue-track",trackCurrentTime:".cue-track-current-time",trackDuration:".cue-track-duration",trackPlayBar:".cue-track-play-bar",trackProgressBar:".cue-track-progress-bar",trackSeekBar:".cue-track-seek-bar",tracklist:".cue-tracklist"}}),b.extend(MediaElementPlayer.prototype,{cueCurrentTrack:0,buildcueplaylist:function(a,d,e,f){var g=a.options.cueSelectors,h=b(f),i=a.container.closest(g.playlist),j=i.find(g.track);j.filter(function(b){var c=a.options.cuePlaylistTracks[b]||{};return"src"in c&&""!==c.src}).addClass("is-playable"),a.cueSetCurrentTrack(a.options.cuePlaylistTracks[0],!1),i.on("click.cue",g.trackSeekBar,function(c){var d=b(this),e=a.options.duration>0?a.options.duration:a.media.duration,g=c.pageX-d.offset().left,h=d.outerWidth(),i=g/h;i=.2>i?0:i,f.setCurrentTime(i*e)}),i.on("click.cue",g.track,function(d){var e=b(this),h=j.index(e),i=b(d.target),k=e.find("a, .js-disable-playpause, "+g.trackProgressBar);i.is(k)||k.find(i).length||(c.setPlayer(a).setTrack(e),a.cueCurrentTrack===h&&""!==a.options.cuePlaylistTracks[h].src?f.paused?f.play():f.pause():a.cueSetCurrentTrack(h))}),h.on("play.cue",function(){var b=j.removeClass("is-playing").eq(a.cueCurrentTrack).addClass("is-playing");c.setPlayer(a).setTrack(b)}),h.on("pause.cue",function(){j.removeClass("is-playing")}),h.on("timeupdate.cue",function(){c.updateTimeCodes()}),h.on("ended.cue",function(){a.$node.trigger("nextTrack.cue",a),a.cuePlayNextTrack()})},cueSetCurrentTrack:function(a,b){{var c=this,d=c.options.cueSelectors;c.layers.find(".mejs-track-artwork")}"number"==typeof a&&(c.cueCurrentTrack=a,a=c.options.cuePlaylistTracks[c.cueCurrentTrack]),c.container.closest(d.playlist).find(d.track).removeClass("is-current").eq(c.cueCurrentTrack).addClass("is-current"),a.length&&c.controls.find(".mejs-duration").text(a.length),c.pause(),a.src&&(c.setSrc(a.src),c.load()),c.$node.trigger("setTrack.cue",[a,c]),a.src&&(b||"undefined"==typeof b)&&setTimeout(function(){c.play()},100)}}),c={player:null,$track:b(),$duration:b(),$playBar:b(),$time:b(),setPlayer:function(a){return this.player=a,this},setTrack:function(a){var c=this.player.options.cueSelectors;return this.$track=a instanceof jQuery?a:b(a),this.$duration=this.$track.find(c.trackDuration),this.$playBar=this.$track.find(c.trackPlayBar),this.$time=this.$track.find(c.trackCurrentTime),this},updateTimeCodes:function(){var a,b,c,d=this.player;if(null!==d)return a=d.options.duration>0?d.options.duration:d.media.duration,isNaN(a)||(b=mejs.Utility.secondsToTimeCode(a,d.options.alwaysShowHours,d.options.showTimecodeFrameCount,d.options.framesPerSecond||25),c=mejs.Utility.secondsToTimeCode(d.media.currentTime,d.options.alwaysShowHours||d.media.duration>3600,d.options.showTimecodeFrameCount,d.options.framesPerSecond||25),this.$duration.text(b),this.$playBar.width(d.media.currentTime/a*100+"%"),this.$time.text(c)),this}}}(this,jQuery),function(a,b){"use strict";b.extend(MediaElementPlayer.prototype,{buildcueplaylisttoggle:function(a){var c=a.options.cueSelectors;b('<div class="mejs-button mejs-toggle-playlist-button mejs-toggle-playlist"><button type="button" aria-controls="'+a.id+'" title="'+cue.l10n.togglePlaylist+'"></button></div>').appendTo(a.controls).on("click",function(){b(this).closest(c.playlist).find(c.tracklist).slideToggle(200)})}})}(this,jQuery),function(a,b){"use strict";b.extend(MediaElementPlayer.prototype,{buildcueprevioustrack:function(a,c){b('<div class="mejs-button mejs-previous-button mejs-previous"><button type="button" aria-controls="'+a.id+'" title="'+cue.l10n.previousTrack+'"></button></div>').appendTo(c).on("click.cue",function(){a.cuePlayPreviousTrack()})},cuePlayPreviousTrack:function(){var a=this,b=a.cueCurrentTrack-1<0?a.options.cuePlaylistTracks.length-1:a.cueCurrentTrack-1;a.$node.trigger("previousTrack.cue",a),a.cueSetCurrentTrack(b)}})}(this,jQuery);