/*!
 * jquery.cue.js - 1.2.5
 * Playlist and other functionality for MediaElement.js
 * https://audiotheme.com/
 *
 * Copyright 2014, AudioTheme LLC
 * License: MIT
 */

window.cue=window.cue||{},function(e,c){"use strict";var n=c(e),e=e.cue,t=MediaElementPlayer.prototype.setControlsSize;e.l10n=c.extend({nextTrack:"Next Track",previousTrack:"Previous Track",togglePlaylist:"Toggle Playlist"},e.l10n||{}),e.settings=e.settings||{},c("html").addClass(function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")?"svg":"no-svg"}),c.extend(mejs.MepDefaults,{cueDisableControlsSizing:!1,cueResponsiveProgress:!1,cueSelectors:{container:".cue-playlist-container"},cueSkin:""}),MediaElementPlayer.prototype.setControlsSize=function(){!0!==this.options.cueDisableControlsSizing&&t.call(this)},c.fn.cuePlaylist=function(n){var a=c.extend({},c.fn.cuePlaylist.defaults,n);return a.cueSelectors=c.extend({},mejs.MepDefaults.cueSelectors,{playlist:this.selector,track:".cue-track"}),"object"==typeof n&&"cueSelectors"in n&&c.extend(a.cueSelectors,n.cueSelectors),this.each(function(){var e,t,s=c(this),r=s.find(".cue-audio, audio").first(),i=s.find(".cue-playlist-data");if(i.length||(i=s.closest(a.cueSelectors.container).find(".cue-playlist-data")),i.length&&("signature"in(i=JSON.parse(i.first().html()))&&(a.cueSignature=i.signature),"cueSignature"in i&&(a.cueSignature=i.cueSignature),(void 0===n||void 0===n.cuePlaylistTracks)&&"tracks"in i&&(a.cuePlaylistTracks=i.tracks)),a.cuePlaylistTracks.length){if(t=a.cuePlaylistTracks.length,s.addClass("cue-tracks-count-"+t),!r.length)for(e=0;e<t;e++)if(""!==a.cuePlaylistTracks[e].src){r=c("<audio />",{src:a.cuePlaylistTracks[e].src}).prependTo(s);break}r.mediaelementplayer(a)}})},c.fn.cuePlaylist.defaults={autosizeProgress:!1,autoRewind:!1,cuePlaylistLoop:!1,cuePlaylistTracks:[],cueSkin:"cue-skin-default",defaultAudioHeight:0,enableAutosize:!1,features:["cueartwork","cuecurrentdetails","cueprevioustrack","playpause","cuenexttrack","progress","current","duration","cueplaylist"],success:function(e,t,s){var r=c(e),i=c(s.container).closest(s.options.cueSelectors.playlist);""!==s.options.cueSkin&&s.changeSkin(s.options.cueSkin),s.options.cueResponsiveProgress&&n.on("resize.cue",function(){c(s.controls).find(".mejs-time-rail").width("100%")}).trigger("resize.cue"),c(s.node).on("loadedmetadata",function(e){!isNaN(e.target.duration)&&isFinite(e.target.duration)||c(s.container).find(".mejs-time-separator, .mejs-duration").hide()}),r.on("play.cue",function(){i.addClass("is-playing")}).on("pause.cue",function(){i.removeClass("is-playing")}),c(s.options.cueSelectors.playlist).removeClass("is-loading"),i.trigger("success.cue",[e,t,s])},timeAndDurationSeparator:'<span class="mejs-time-separator"> / </span>',timeFormat:"m:ss"}}(this,jQuery),function(r){"use strict";r.extend(MediaElementPlayer.prototype,{buildcueartwork:function(e,t,s){var i=r(s).append('<span class="mejs-track-artwork"><img src=""></span>').find(".mejs-track-artwork");r(e.node).on("setTrack.cue",function(e,t,s){var r;t.thumb=t.thumb||{},r=void 0!==t.thumb.src&&""!==t.thumb.src,i.find("img").attr("src",t.thumb.src).toggle(r),i.closest(s.options.cueSelectors.playlist).toggleClass("has-artwork",r)})}})}(jQuery),function(n){"use strict";n.extend(MediaElementPlayer.prototype,{buildcuecurrentdetails:function(e,t,s){var r,i,s=n(s);s.append('<div class="mejs-track-details"><span class="mejs-track-artist"></span><span class="mejs-track-title"></span></div>'),r=s.find(".mejs-track-artist"),i=s.find(".mejs-track-title"),n(e.node).on("setTrack.cue",function(e,t,s){t.meta=t.meta||{},t.title=t.title||"",r.html(t.meta.artist),i.html(t.title)})}})}(jQuery),function(n,e,a){"use strict";var t,c,s=MediaElementPlayer.prototype.init;function u(r,e){var i=function(e){try{var t=n[e],s="__storage_test__";return t.setItem(s,s),t.removeItem(s),1}catch(e){return}}("sessionStorage")?sessionStorage:{},t=r+"-signature";this.set=function(e,t){i[r+"-"+e]=t},this.get=function(e){var t,s=r+"-"+e;return void 0!==i[s]&&(t=i[s],"currentTime"===e?t=parseFloat(t):"status"===e?t="playing"===t?"playing":"paused":"trackIndex"===e?t=parseInt(t,10):"volume"===e&&(t=parseFloat(t))),t},this.clear=function(){for(var e in i)i.hasOwnProperty(e)&&0===e.indexOf(r+"-")&&delete i[e]},void 0!==i[t]&&i[t]===e||this.clear(),i[t]=e}MediaElementPlayer.prototype.init=function(){var e;-1!==this.options.features.indexOf("cuehistory")&&(c=this.options.success,this.options.success=t,(e=new u(this.options.cueId||"",this.options.cueSignature||""))&&a!==e.get("volume")&&(this.options.startVolume=e.get("volume"))),s.call(this)},t=function(e,t,s){var r=new u(s.options.cueId||"",s.options.cueSignature||""),i="autoplay"===e.getAttribute("autoplay"),n=mejs.MediaFeatures||mejs.Features;r&&a!==r.get("volume")&&e.setVolume(r.get("volume")),r&&a!==r.get("trackIndex")&&(i="playing"===(r?r.get("status"):"")&&!n.isiOS&&!n.isAndroid&&!i,s.cueAutoResume=i,"cuePlaylistTracks"in s.options&&s.options.cuePlaylistTracks.length?s.cueSetCurrentTrack(r.get("trackIndex"),i):i&&s.cuePlay()),c.call(this,e,t,s)},e.extend(mejs.MepDefaults,{cueId:"cue",cueSignature:""}),e.extend(MediaElementPlayer.prototype,{cueHistory:null,cueAutoResume:!1,buildcuehistory:function(t,e,s,r){var i=!1,n=mejs.MediaFeatures||mejs.Features,a=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),c=t.cueHistory=new u(t.options.cueId,t.options.cueSignature),o=c.get("currentTime");r.addEventListener("play",function(){c.set("trackIndex",t.cueCurrentTrack),c.set("status","playing")}),r.addEventListener("pause",function(){c.set("status","paused")}),r.addEventListener("timeupdate",function(){c.set("currentTime",r.currentTime)}),r.addEventListener("volumechange",function(){c.set("volume",r.volume)}),r.addEventListener("playing",function(){if(!(i||o<1)){if(n.isiOS||a)var e=setInterval(function(){o<r.buffered.end(0)&&(clearInterval(e),t.setCurrentTime(o),t.setCurrentRail())},50);else try{t.setCurrentTime(o),t.setCurrentRail()}catch(e){}i=!0}})}})}(this,jQuery),function(r){"use strict";r.extend(MediaElementPlayer.prototype,{buildcueicons:function(e,t){var e=r(e.options.cueSelectors.container).find("[data-cue-control]"),s=r(t);e.each(function(){var e=r(this);e.appendTo(s.find(e.data("cueControl")))})}})}(jQuery),function(i,n){"use strict";i.extend(MediaElementPlayer.prototype,{buildcuenexttrack:function(s,e,t,r){i('<div class="mejs-button mejs-next-button mejs-next"><button type="button" aria-controls="'+s.id+'" title="'+n.l10n.nextTrack+'"></button></div>').appendTo(e).on("click.cue",function(){var e=s.cueGetCurrentTrack()||{},t=i.extend({},{currentTime:r.currentTime,duration:r.duration,src:r.src});i(s.node).trigger("skipNext.cue",[t,e]),s.cuePlayNextTrack()})},cuePlayNextTrack:function(){var e=this,t=e.cueCurrentTrack+1>=e.options.cuePlaylistTracks.length?0:e.cueCurrentTrack+1;i(e.node).trigger("nextTrack.cue",e),e.cueSetCurrentTrack(t)}})}(jQuery,window.cue),function(c){"use strict";var o,t;c.extend(mejs.MepDefaults,{cuePlaylistLoop:!1,cuePlaylistTracks:[]}),c.extend(mejs.MepDefaults.cueSelectors,{playlist:".cue-playlist",track:".cue-track",trackCurrentTime:".cue-track-current-time",trackDuration:".cue-track-duration",trackPlayBar:".cue-track-play-bar",trackProgressBar:".cue-track-progress-bar",trackSeekBar:".cue-track-seek-bar",tracklist:".cue-tracklist"}),c.extend(MediaElementPlayer.prototype,{$cueTracks:c(),cueCurrentTrack:0,buildcueplaylist:function(i,e,t,n){var a=i.options.cueSelectors,s=c(n),r=c(i.container).closest(a.playlist);i.cueSetupTracklist(),i.cueSetCurrentTrack(i.options.cuePlaylistTracks[0],!1),r.on("click.cue",a.trackSeekBar,function(e){var t=c(this),s=(0<i.options.duration?i.options:i.media).duration,t=(t=(e.pageX-t.offset().left)/t.outerWidth())<.2?0:t;n.setCurrentTime(t*s)}),r.on("click.cue",a.track,function(e){var t=c(this),s=i.$cueTracks.index(t),r=c(e.target),e=t.find("a, .js-disable-playpause, "+a.trackProgressBar);r.is(e)||e.find(r).length||(o.setPlayer(i).setTrack(t),i.cueCurrentTrack===s&&""!==i.options.cuePlaylistTracks[s].src?n.paused?n.play():n.pause():i.cueSetCurrentTrack(s))}),s.on("play.cue",function(){var e=i.$cueTracks.removeClass("is-playing").eq(i.cueCurrentTrack).addClass("is-playing");o.setPlayer(i).setTrack(e)}),s.on("pause.cue",function(){i.$cueTracks.removeClass("is-playing")}),s.on("timeupdate.cue",function(){o.updateTimeCodes()}),s.on("ended.cue",function(){var e=i.cueCurrentTrack+1>=i.options.cuePlaylistTracks.length?0:i.cueCurrentTrack+1;!i.options.cuePlaylistLoop&&0===e||setTimeout(function(){c(i.node).trigger("nextTrack.cue",i),i.cuePlayNextTrack()},250)})},cuePlay:function(){var e=this;!e.media.paused&&"flash"!==e.media.pluginType||(clearTimeout(t),t=setTimeout(function(){e.play()},50))},cueGetCurrentTrack:function(){return this.options.cuePlaylistTracks[this.cueCurrentTrack]},cueSetCurrentTrack:function(e,t){var s=this,r=s.options.cueSelectors;"number"==typeof e&&(s.cueCurrentTrack=e,e=s.cueGetCurrentTrack()),c(s.container).closest(r.playlist).find(r.track).removeClass("is-current").eq(s.cueCurrentTrack).addClass("is-current"),e.length&&c(s.controls).find(".mejs-duration").text(e.length),e.src&&e.src!==decodeURI(s.media.src)&&(s.pause(),s.setSrc(e.src),s.load()),r=e.title||"",c(s.media).attr("title",r),c(s.node).trigger("setTrack.cue",[e,s]),e.src&&(void 0===t||t)&&s.cuePlay()},cueSetupTracklist:function(){var t=this,e=t.options.cueSelectors,s=c(t.container).closest(e.playlist);t.$cueTracks=s.find(e.track),t.$cueTracks.filter(function(e){e=t.options.cuePlaylistTracks[e]||{};return"src"in e&&""!==e.src}).addClass("is-playable")}}),o={player:null,$track:c(),$duration:c(),$playBar:c(),$time:c(),setPlayer:function(e){return this.player=e,this},setTrack:function(e){var t=this.player.options.cueSelectors;return this.$track=e instanceof jQuery?e:c(e),this.$duration=this.$track.find(t.trackDuration),this.$playBar=this.$track.find(t.trackPlayBar),this.$time=this.$track.find(t.trackCurrentTime),this},updateTimeCodes:function(){var e,t,s=this.player,r=mejs.Utility||mejs.Utils;if(null!==s)return e=(0<s.options.duration?s.options:s.media).duration,isNaN(e)||(t=r.secondsToTimeCode(e,s.options.alwaysShowHours,s.options.showTimecodeFrameCount,s.options.framesPerSecond||25,s.options.secondsDecimalLength||0,s.options.timeFormat||"m:ss"),r=r.secondsToTimeCode(s.media.currentTime,s.options.alwaysShowHours||3600<s.media.duration,s.options.showTimecodeFrameCount,s.options.framesPerSecond||25,s.options.secondsDecimalLength||0,s.options.timeFormat||"m:ss"),this.$duration.text(t),this.$playBar.width(s.media.currentTime/e*100+"%"),this.$time.text(r)),this}}}(jQuery),function(o,u){"use strict";o.extend(mejs.MepDefaults,{cuePlaylistToggle:function(e,t){e.slideToggle(200)}}),o.extend(MediaElementPlayer.prototype,{buildcueplaylisttoggle:function(s,e,t,r){var i=s.options.cueSelectors,n=o(s.container).closest(i.playlist),a=n.find(i.tracklist),c=a.is(":visible");n.addClass(function(){return c?"is-tracklist-open":"is-tracklist-closed"}),o('<div class="mejs-button mejs-toggle-playlist-button mejs-toggle-playlist"><button type="button" aria-controls="'+s.id+'" title="'+u.l10n.togglePlaylist+'"></button></div>').appendTo(s.controls).on("click",function(){var e=o(this),t=a.is(":visible");e.toggleClass("is-open",!t).toggleClass("is-closed",t),n.toggleClass("is-tracklist-open",!t).toggleClass("is-tracklist-closed",t),"function"==typeof s.options.cuePlaylistToggle&&s.options.cuePlaylistToggle(a,s)}).addClass(function(){return c?"is-open":"is-closed"})}})}(jQuery,window.cue),function(i,n){"use strict";i.extend(MediaElementPlayer.prototype,{buildcueprevioustrack:function(s,e,t,r){i('<div class="mejs-button mejs-previous-button mejs-previous"><button type="button" aria-controls="'+s.id+'" title="'+n.l10n.previousTrack+'"></button></div>').appendTo(e).on("click.cue",function(){var e=s.cueGetCurrentTrack()||{},t=i.extend({},{currentTime:r.currentTime,duration:r.duration,src:r.src});i(s.node).trigger("skipBack.cue",[t,e]),s.cuePlayPreviousTrack()})},cuePlayPreviousTrack:function(){var e=this,t=e.cueCurrentTrack-1<0?e.options.cuePlaylistTracks.length-1:e.cueCurrentTrack-1;i(e.node).trigger("previousTrack.cue",e),e.cueSetCurrentTrack(t)}})}(jQuery,window.cue);