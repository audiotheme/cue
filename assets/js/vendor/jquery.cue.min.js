/*!
 * jquery.cue.js - 1.1.4
 * Playlist and other functionality for MediaElement.js
 * https://audiotheme.com/
 *
 * Copyright 2014, AudioTheme LLC
 * License: MIT
 */
window.cue=window.cue||{},function(a,b,c){"use strict";var d=b(a),e=a.cue;e.l10n=b.extend({nextTrack:"Next Track",previousTrack:"Previous Track",togglePlaylist:"Toggle Playlist"},e.l10n||{}),e.settings=e.settings||{},mejs.plugins.silverlight[0].types.push("audio/x-ms-wma"),b("html").addClass(function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")?"svg":"no-svg"}),b.extend(mejs.MepDefaults,{cueResponsiveProgress:!1,cueSelectors:{container:".cue-playlist-container"},cueSkin:""}),b.fn.cuePlaylist=function(a){var c=b.extend({},b.fn.cuePlaylist.defaults,a);return c.cueSelectors=b.extend({},mejs.MepDefaults.cueSelectors,{playlist:this.selector,track:".cue-track"}),"object"==typeof a&&"cueSelectors"in a&&b.extend(c.cueSelectors,a.cueSelectors),this.each(function(){var d,e,f,g=b(this),h=g.find(".cue-audio, audio").first(),i=g.find(".cue-playlist-data, script");if(i.length||(i=g.closest(c.cueSelectors.container).find(".cue-playlist-data, script")),i.length&&(d=b.parseJSON(i.first().html()),"cueSignature"in d&&(c.cueSignature=d.cueSignature),("undefined"==typeof a||"undefined"==typeof a.cuePlaylistTracks)&&"tracks"in d&&(c.cuePlaylistTracks=d.tracks)),c.cuePlaylistTracks.length){if(f=c.cuePlaylistTracks.length,g.addClass("cue-tracks-count-"+f),!h.length)for(e=0;f>e;e++)if(""!==c.cuePlaylistTracks[e].src){h=b("<audio />",{src:c.cuePlaylistTracks[e].src}).prependTo(g);break}h.mediaelementplayer(c)}})},b.fn.cuePlaylist.defaults={autosizeProgress:!1,cuePlaylistLoop:!0,cuePlaylistTracks:[],cueSkin:"cue-skin-default",defaultAudioHeight:0,enableAutosize:!1,features:["cueartwork","cuecurrentdetails","cueprevioustrack","playpause","cuenexttrack","progress","current","duration","cueplaylist"],success:function(a,c,e){var f=b(a),g=e.container.closest(e.options.cueSelectors.playlist);""!==e.options.cueSkin&&e.changeSkin(e.options.cueSkin),e.options.cueResponsiveProgress&&d.on("resize.cue",function(){e.controls.find(".mejs-time-rail").width("100%")}).trigger("resize.cue"),f.on("play.cue",function(){g.addClass("is-playing")}).on("pause.cue",function(){g.removeClass("is-playing")}),b(e.options.cueSelectors.playlist).removeClass("is-loading"),g.trigger("success.cue",[a,c,e])},timeAndDurationSeparator:'<span class="mejs-time-separator"> / </span>'}}(this,jQuery),function(a,b,c){"use strict";b.extend(MediaElementPlayer.prototype,{buildcueartwork:function(a,b,c){var d=c.append('<span class="mejs-track-artwork"><img src=""></span>').find(".mejs-track-artwork");a.$node.on("setTrack.cue",function(a,b,c){var e;b.thumb=b.thumb||{},e="undefined"!=typeof b.thumb.src&&""!==b.thumb.src,d.find("img").attr("src",b.thumb.src).toggle(e),d.closest(c.options.cueSelectors.playlist).toggleClass("has-artwork",e)})}})}(this,jQuery),function(a,b,c){"use strict";b.extend(MediaElementPlayer.prototype,{buildcuecurrentdetails:function(a,b,c){var d,e;c.append('<div class="mejs-track-details"><span class="mejs-track-artist"></span><span class="mejs-track-title"></span></div>'),d=c.find(".mejs-track-artist"),e=c.find(".mejs-track-title"),a.$node.on("setTrack.cue",function(a,b,c){b.meta=b.meta||{},b.title=b.title||{},d.html(b.meta.artist),e.html(b.title)})}})}(this,jQuery),function(a,b,c){"use strict";function d(a,b){var c=sessionStorage||{},d=a+"-signature";this.set=function(b,d){var e=a+"-"+b;c[e]=d},this.get=function(b){var d,e=a+"-"+b;return"undefined"!=typeof c[e]&&(d=c[e],"currentTime"===b?d=parseFloat(d):"status"===b?d="playing"===d?"playing":"paused":"trackIndex"===b?d=parseInt(d,10):"volume"===b&&(d=parseFloat(d))),d},this.clear=function(){var b;for(b in c)c.hasOwnProperty(b)&&0===b.indexOf(a+"-")&&delete c[b]},("undefined"==typeof c[d]||c[d]!==b)&&this.clear(),c[d]=b}var e,f,g=mejs.MediaElementPlayer.prototype.init;mejs.MediaElementPlayer.prototype.init=function(){-1!==b.inArray("cuehistory",this.options.features)&&(f=this.options.success,this.options.success=e),g.call(this)},e=function(a,b,e){var g,h,i=new d(e.options.cueId||"",e.options.cueSignature||""),j="autoplay"===a.getAttribute("autoplay"),k=mejs.MediaFeatures;i&&c!==i.get("volume")&&a.setVolume(i.get("volume")),i&&c!==i.get("trackIndex")&&(h=i?i.get("status"):"",g="playing"===h&&!k.isiOS&&!k.isAndroid&&!j,"cuePlaylistTracks"in e.options&&e.options.cuePlaylistTracks.length?e.cueSetCurrentTrack(i.get("trackIndex"),g):g&&e.cuePlay()),f.call(this,a,b,e)},b.extend(mejs.MepDefaults,{cueId:"cue",cueSignature:""}),b.extend(MediaElementPlayer.prototype,{cueHistory:null,buildcuehistory:function(a,b,c,e){var f,g,h=(a.container.closest(a.options.cueSelectors.playlist),!1),i=mejs.MediaFeatures,j=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);g=a.cueHistory=new d(a.options.cueId,a.options.cueSignature),f=g.get("currentTime"),e.addEventListener("play",function(){g.set("trackIndex",a.cueCurrentTrack),g.set("status","playing")}),e.addEventListener("pause",function(){g.set("status","paused")}),e.addEventListener("timeupdate",function(){g.set("currentTime",e.currentTime)}),e.addEventListener("volumechange",function(){g.set("volume",e.volume)}),e.addEventListener("playing",function(){if(!(h||1>f)){if(i.isiOS||j)var b=setInterval(function(){f<e.buffered.end(0)&&(clearInterval(b),a.setCurrentTime(f),a.setCurrentRail())},50);else try{a.setCurrentTime(f),a.setCurrentRail()}catch(c){}h=!0}})}})}(this,jQuery),function(a,b,c){"use strict";b.extend(MediaElementPlayer.prototype,{buildcueicons:function(a,c){var d=b(a.options.cueSelectors.container).find("[data-cue-control]");d.each(function(){var a=b(this);a.appendTo(c.find(a.data("cueControl")))})}})}(this,jQuery),function(a,b,c,d){"use strict";b.extend(MediaElementPlayer.prototype,{buildcuenexttrack:function(a,d){b('<div class="mejs-button mejs-next-button mejs-next"><button type="button" aria-controls="'+a.id+'" title="'+c.l10n.nextTrack+'"></button></div>').appendTo(d).on("click.cue",function(){a.cuePlayNextTrack()})},cuePlayNextTrack:function(){var a=this,b=a.cueCurrentTrack+1>=a.options.cuePlaylistTracks.length?0:a.cueCurrentTrack+1;a.$node.trigger("nextTrack.cue",a),a.cueSetCurrentTrack(b)}})}(this,jQuery,window.cue),function(a,b,c){"use strict";var d,e;b.extend(mejs.MepDefaults,{cuePlaylistLoop:!0,cuePlaylistTracks:[]}),b.extend(mejs.MepDefaults.cueSelectors,{playlist:".cue-playlist",track:".cue-track",trackCurrentTime:".cue-track-current-time",trackDuration:".cue-track-duration",trackPlayBar:".cue-track-play-bar",trackProgressBar:".cue-track-progress-bar",trackSeekBar:".cue-track-seek-bar",tracklist:".cue-tracklist"}),b.extend(MediaElementPlayer.prototype,{$cueTracks:b(),cueCurrentTrack:0,buildcueplaylist:function(a,c,e,f){var g=a.options.cueSelectors,h=b(f),i=a.container.closest(g.playlist);i.find(g.track);a.cueSetupTracklist(),a.cueSetCurrentTrack(a.options.cuePlaylistTracks[0],!1),i.on("click.cue",g.trackSeekBar,function(c){var d=b(this),e=a.options.duration>0?a.options.duration:a.media.duration,g=c.pageX-d.offset().left,h=d.outerWidth(),i=g/h;i=.2>i?0:i,f.setCurrentTime(i*e)}),i.on("click.cue",g.track,function(c){var e=b(this),h=a.$cueTracks.index(e),i=b(c.target),j=e.find("a, .js-disable-playpause, "+g.trackProgressBar);i.is(j)||j.find(i).length||(d.setPlayer(a).setTrack(e),a.cueCurrentTrack===h&&""!==a.options.cuePlaylistTracks[h].src?f.paused?f.play():f.pause():a.cueSetCurrentTrack(h))}),h.on("play.cue",function(){var b=a.$cueTracks.removeClass("is-playing").eq(a.cueCurrentTrack).addClass("is-playing");d.setPlayer(a).setTrack(b)}),h.on("pause.cue",function(){a.$cueTracks.removeClass("is-playing")}),h.on("timeupdate.cue",function(){d.updateTimeCodes()}),h.on("ended.cue",function(){var b=a.cueCurrentTrack+1>=a.options.cuePlaylistTracks.length?0:a.cueCurrentTrack+1;(a.options.cuePlaylistLoop||0!==b)&&(a.$node.trigger("nextTrack.cue",a),a.cuePlayNextTrack())})},cuePlay:function(){var a=this;(a.media.paused||"flash"===a.media.pluginType)&&(clearTimeout(e),e=setTimeout(function(){a.play()},50))},cueSetCurrentTrack:function(a,b){var c=this,d=c.options.cueSelectors;"number"==typeof a&&(c.cueCurrentTrack=a,a=c.options.cuePlaylistTracks[c.cueCurrentTrack]),c.container.closest(d.playlist).find(d.track).removeClass("is-current").eq(c.cueCurrentTrack).addClass("is-current"),a.length&&c.controls.find(".mejs-duration").text(a.length),a.src&&a.src!==c.media.src&&(c.pause(),c.setSrc(a.src),c.load()),c.$node.trigger("setTrack.cue",[a,c]),a.src&&("undefined"==typeof b||b)&&c.cuePlay()},cueSetupTracklist:function(){var a=this,b=a.options.cueSelectors,c=a.container.closest(b.playlist);a.$cueTracks=c.find(b.track),a.$cueTracks.filter(function(b){var c=a.options.cuePlaylistTracks[b]||{};return"src"in c&&""!==c.src}).addClass("is-playable")}}),d={player:null,$track:b(),$duration:b(),$playBar:b(),$time:b(),setPlayer:function(a){return this.player=a,this},setTrack:function(a){var c=this.player.options.cueSelectors;return this.$track=a instanceof jQuery?a:b(a),this.$duration=this.$track.find(c.trackDuration),this.$playBar=this.$track.find(c.trackPlayBar),this.$time=this.$track.find(c.trackCurrentTime),this},updateTimeCodes:function(){var a,b,c,d=this.player;if(null!==d)return a=d.options.duration>0?d.options.duration:d.media.duration,isNaN(a)||(b=mejs.Utility.secondsToTimeCode(a,d.options.alwaysShowHours,d.options.showTimecodeFrameCount,d.options.framesPerSecond||25),c=mejs.Utility.secondsToTimeCode(d.media.currentTime,d.options.alwaysShowHours||d.media.duration>3600,d.options.showTimecodeFrameCount,d.options.framesPerSecond||25),this.$duration.text(b),this.$playBar.width(d.media.currentTime/a*100+"%"),this.$time.text(c)),this}}}(this,jQuery),function(a,b,c,d){"use strict";b.extend(mejs.MepDefaults,{cuePlaylistToggle:function(a,b){a.slideToggle(200)}}),b.extend(MediaElementPlayer.prototype,{buildcueplaylisttoggle:function(a,d,e,f){var g=a.options.cueSelectors,h=a.container.closest(g.playlist),i=h.find(g.tracklist),j=i.is(":visible");h.addClass(function(){return j?"is-tracklist-open":"is-tracklist-closed"}),b('<div class="mejs-button mejs-toggle-playlist-button mejs-toggle-playlist"><button type="button" aria-controls="'+a.id+'" title="'+c.l10n.togglePlaylist+'"></button></div>').appendTo(a.controls).on("click",function(){var c=b(this),d=i.is(":visible");c.toggleClass("is-open",!d).toggleClass("is-closed",d),h.toggleClass("is-tracklist-open",!d).toggleClass("is-tracklist-closed",d),b.isFunction(a.options.cuePlaylistToggle)&&a.options.cuePlaylistToggle(i,a)}).addClass(function(){return j?"is-open":"is-closed"})}})}(this,jQuery,window.cue),function(a,b,c,d){"use strict";b.extend(MediaElementPlayer.prototype,{buildcueprevioustrack:function(a,d){b('<div class="mejs-button mejs-previous-button mejs-previous"><button type="button" aria-controls="'+a.id+'" title="'+c.l10n.previousTrack+'"></button></div>').appendTo(d).on("click.cue",function(){a.cuePlayPreviousTrack()})},cuePlayPreviousTrack:function(){var a=this,b=a.cueCurrentTrack-1<0?a.options.cuePlaylistTracks.length-1:a.cueCurrentTrack-1;a.$node.trigger("previousTrack.cue",a),a.cueSetCurrentTrack(b)}})}(this,jQuery,window.cue);