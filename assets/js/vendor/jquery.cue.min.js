/*!
 * jquery.cue.js - 1.2.1
 * Playlist and other functionality for MediaElement.js
 * https://audiotheme.com/
 *
 * Copyright 2014, AudioTheme LLC
 * License: MIT
 */
window.cue=window.cue||{},function(a,b,c){"use strict";var d=b(a),e=a.cue,f=MediaElementPlayer.prototype.setControlsSize;e.l10n=b.extend({nextTrack:"Next Track",previousTrack:"Previous Track",togglePlaylist:"Toggle Playlist"},e.l10n||{}),e.settings=e.settings||{},b("html").addClass(function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")?"svg":"no-svg"}),b.extend(mejs.MepDefaults,{cueDisableControlsSizing:!1,cueResponsiveProgress:!1,cueSelectors:{container:".cue-playlist-container"},cueSkin:""}),MediaElementPlayer.prototype.setControlsSize=function(){!0!==this.options.cueDisableControlsSizing&&f.call(this)},b.fn.cuePlaylist=function(a){var c=b.extend({},b.fn.cuePlaylist.defaults,a);return c.cueSelectors=b.extend({},mejs.MepDefaults.cueSelectors,{playlist:this.selector,track:".cue-track"}),"object"==typeof a&&"cueSelectors"in a&&b.extend(c.cueSelectors,a.cueSelectors),this.each(function(){var d,e,f,g=b(this),h=g.find(".cue-audio, audio").first(),i=g.find(".cue-playlist-data, script");if(i.length||(i=g.closest(c.cueSelectors.container).find(".cue-playlist-data, script")),i.length&&(d=b.parseJSON(i.first().html()),"signature"in d&&(c.cueSignature=d.signature),"cueSignature"in d&&(c.cueSignature=d.cueSignature),("undefined"==typeof a||"undefined"==typeof a.cuePlaylistTracks)&&"tracks"in d&&(c.cuePlaylistTracks=d.tracks)),c.cuePlaylistTracks.length){if(f=c.cuePlaylistTracks.length,g.addClass("cue-tracks-count-"+f),!h.length)for(e=0;f>e;e++)if(""!==c.cuePlaylistTracks[e].src){h=b("<audio />",{src:c.cuePlaylistTracks[e].src}).prependTo(g);break}h.mediaelementplayer(c)}})},b.fn.cuePlaylist.defaults={autosizeProgress:!1,autoRewind:!1,cuePlaylistLoop:!1,cuePlaylistTracks:[],cueSkin:"cue-skin-default",defaultAudioHeight:0,enableAutosize:!1,features:["cueartwork","cuecurrentdetails","cueprevioustrack","playpause","cuenexttrack","progress","current","duration","cueplaylist"],success:function(a,c,e){var f=b(a),g=b(e.container).closest(e.options.cueSelectors.playlist);""!==e.options.cueSkin&&e.changeSkin(e.options.cueSkin),e.options.cueResponsiveProgress&&d.on("resize.cue",function(){b(e.controls).find(".mejs-time-rail").width("100%")}).trigger("resize.cue"),b(e.node).on("loadedmetadata",function(a){!isNaN(a.target.duration)&&isFinite(a.target.duration)||b(e.container).find(".mejs-time-separator, .mejs-duration").hide()}),f.on("play.cue",function(){g.addClass("is-playing")}).on("pause.cue",function(){g.removeClass("is-playing")}),b(e.options.cueSelectors.playlist).removeClass("is-loading"),g.trigger("success.cue",[a,c,e])},timeAndDurationSeparator:'<span class="mejs-time-separator"> / </span>'}}(this,jQuery),function(a,b,c){"use strict";b.extend(MediaElementPlayer.prototype,{buildcueartwork:function(a,c,d){var e=b(d).append('<span class="mejs-track-artwork"><img src=""></span>').find(".mejs-track-artwork");b(a.node).on("setTrack.cue",function(a,b,c){var d;b.thumb=b.thumb||{},d="undefined"!=typeof b.thumb.src&&""!==b.thumb.src,e.find("img").attr("src",b.thumb.src).toggle(d),e.closest(c.options.cueSelectors.playlist).toggleClass("has-artwork",d)})}})}(this,jQuery),function(a,b,c){"use strict";b.extend(MediaElementPlayer.prototype,{buildcuecurrentdetails:function(a,c,d){var e,f,g=b(d);g.append('<div class="mejs-track-details"><span class="mejs-track-artist"></span><span class="mejs-track-title"></span></div>'),e=g.find(".mejs-track-artist"),f=g.find(".mejs-track-title"),b(a.node).on("setTrack.cue",function(a,b,c){b.meta=b.meta||{},b.title=b.title||"",e.html(b.meta.artist),f.html(b.title)})}})}(this,jQuery),function(a,b,c){"use strict";function d(b){try{var c=a[b],d="__storage_test__";return c.setItem(d,d),c.removeItem(d),!0}catch(e){return!1}}function e(a,b){var c=d("sessionStorage")?sessionStorage:{},e=a+"-signature";this.set=function(b,d){var e=a+"-"+b;c[e]=d},this.get=function(b){var d,e=a+"-"+b;return"undefined"!=typeof c[e]&&(d=c[e],"currentTime"===b?d=parseFloat(d):"status"===b?d="playing"===d?"playing":"paused":"trackIndex"===b?d=parseInt(d,10):"volume"===b&&(d=parseFloat(d))),d},this.clear=function(){var b;for(b in c)c.hasOwnProperty(b)&&0===b.indexOf(a+"-")&&delete c[b]},"undefined"!=typeof c[e]&&c[e]===b||this.clear(),c[e]=b}var f,g,h=MediaElementPlayer.prototype.init;MediaElementPlayer.prototype.init=function(){-1!==this.options.features.indexOf("cuehistory")&&(g=this.options.success,this.options.success=f),h.call(this)},f=function(a,b,d){var f,h,i=new e(d.options.cueId||"",d.options.cueSignature||""),j="autoplay"===a.getAttribute("autoplay"),k=mejs.MediaFeatures||mejs.Features;i&&c!==i.get("volume")&&a.setVolume(i.get("volume")),i&&c!==i.get("trackIndex")&&(h=i?i.get("status"):"",f="playing"===h&&!k.isiOS&&!k.isAndroid&&!j,d.cueAutoResume=f,"cuePlaylistTracks"in d.options&&d.options.cuePlaylistTracks.length?d.cueSetCurrentTrack(i.get("trackIndex"),f):f&&d.cuePlay()),g.call(this,a,b,d)},b.extend(mejs.MepDefaults,{cueId:"cue",cueSignature:""}),b.extend(MediaElementPlayer.prototype,{cueHistory:null,cueAutoResume:!1,buildcuehistory:function(a,b,c,d){var f,g,h=!1,i=mejs.MediaFeatures||mejs.Features,j=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);g=a.cueHistory=new e(a.options.cueId,a.options.cueSignature),f=g.get("currentTime"),d.addEventListener("play",function(){g.set("trackIndex",a.cueCurrentTrack),g.set("status","playing")}),d.addEventListener("pause",function(){g.set("status","paused")}),d.addEventListener("timeupdate",function(){g.set("currentTime",d.currentTime)}),d.addEventListener("volumechange",function(){g.set("volume",d.volume)}),d.addEventListener("playing",function(){if(!(h||1>f)){if(i.isiOS||j)var b=setInterval(function(){f<d.buffered.end(0)&&(clearInterval(b),a.setCurrentTime(f),a.setCurrentRail())},50);else try{a.setCurrentTime(f),a.setCurrentRail()}catch(c){}h=!0}})}})}(this,jQuery),function(a,b,c){"use strict";b.extend(MediaElementPlayer.prototype,{buildcueicons:function(a,c){var d=b(a.options.cueSelectors.container).find("[data-cue-control]"),e=b(c);d.each(function(){var a=b(this);a.appendTo(e.find(a.data("cueControl")))})}})}(this,jQuery),function(a,b,c,d){"use strict";b.extend(MediaElementPlayer.prototype,{buildcuenexttrack:function(a,d,e,f){b('<div class="mejs-button mejs-next-button mejs-next"><button type="button" aria-controls="'+a.id+'" title="'+c.l10n.nextTrack+'"></button></div>').appendTo(d).on("click.cue",function(){var c,d=a.cueGetCurrentTrack()||{};c=b.extend({},{currentTime:f.currentTime,duration:f.duration,src:f.src}),b(a.node).trigger("skipNext.cue",[c,d]),a.cuePlayNextTrack()})},cuePlayNextTrack:function(){var a=this,c=a.cueCurrentTrack+1>=a.options.cuePlaylistTracks.length?0:a.cueCurrentTrack+1;b(a.node).trigger("nextTrack.cue",a),a.cueSetCurrentTrack(c)}})}(this,jQuery,window.cue),function(a,b,c){"use strict";var d,e;b.extend(mejs.MepDefaults,{cuePlaylistLoop:!1,cuePlaylistTracks:[]}),b.extend(mejs.MepDefaults.cueSelectors,{playlist:".cue-playlist",track:".cue-track",trackCurrentTime:".cue-track-current-time",trackDuration:".cue-track-duration",trackPlayBar:".cue-track-play-bar",trackProgressBar:".cue-track-progress-bar",trackSeekBar:".cue-track-seek-bar",tracklist:".cue-tracklist"}),b.extend(MediaElementPlayer.prototype,{$cueTracks:b(),cueCurrentTrack:0,buildcueplaylist:function(a,c,e,f){var g=a.options.cueSelectors,h=b(f),i=b(a.container).closest(g.playlist);a.cueSetupTracklist(),a.cueSetCurrentTrack(a.options.cuePlaylistTracks[0],!1),i.on("click.cue",g.trackSeekBar,function(c){var d=b(this),e=a.options.duration>0?a.options.duration:a.media.duration,g=c.pageX-d.offset().left,h=d.outerWidth(),i=g/h;i=.2>i?0:i,f.setCurrentTime(i*e)}),i.on("click.cue",g.track,function(c){var e=b(this),h=a.$cueTracks.index(e),i=b(c.target),j=e.find("a, .js-disable-playpause, "+g.trackProgressBar);i.is(j)||j.find(i).length||(d.setPlayer(a).setTrack(e),a.cueCurrentTrack===h&&""!==a.options.cuePlaylistTracks[h].src?f.paused?f.play():f.pause():a.cueSetCurrentTrack(h))}),h.on("play.cue",function(){var b=a.$cueTracks.removeClass("is-playing").eq(a.cueCurrentTrack).addClass("is-playing");d.setPlayer(a).setTrack(b)}),h.on("pause.cue",function(){a.$cueTracks.removeClass("is-playing")}),h.on("timeupdate.cue",function(){d.updateTimeCodes()}),h.on("ended.cue",function(){var c=a.cueCurrentTrack+1>=a.options.cuePlaylistTracks.length?0:a.cueCurrentTrack+1;(a.options.cuePlaylistLoop||0!==c)&&setTimeout(function(){b(a.node).trigger("nextTrack.cue",a),a.cuePlayNextTrack()},250)})},cuePlay:function(){var a=this;(a.media.paused||"flash"===a.media.pluginType)&&(clearTimeout(e),e=setTimeout(function(){a.play()},50))},cueGetCurrentTrack:function(){return this.options.cuePlaylistTracks[this.cueCurrentTrack]},cueSetCurrentTrack:function(a,c){var d,e=this,f=e.options.cueSelectors;"number"==typeof a&&(e.cueCurrentTrack=a,a=e.cueGetCurrentTrack()),b(e.container).closest(f.playlist).find(f.track).removeClass("is-current").eq(e.cueCurrentTrack).addClass("is-current"),a.length&&b(e.controls).find(".mejs-duration").text(a.length),a.src&&a.src!==decodeURI(e.media.src)&&(e.pause(),e.setSrc(a.src),e.load()),d=a.title||"",b(e.media).attr("title",d),b(e.node).trigger("setTrack.cue",[a,e]),a.src&&("undefined"==typeof c||c)&&e.cuePlay()},cueSetupTracklist:function(){var a=this,c=a.options.cueSelectors,d=b(a.container).closest(c.playlist);a.$cueTracks=d.find(c.track),a.$cueTracks.filter(function(b){var c=a.options.cuePlaylistTracks[b]||{};return"src"in c&&""!==c.src}).addClass("is-playable")}}),d={player:null,$track:b(),$duration:b(),$playBar:b(),$time:b(),setPlayer:function(a){return this.player=a,this},setTrack:function(a){var c=this.player.options.cueSelectors;return this.$track=a instanceof jQuery?a:b(a),this.$duration=this.$track.find(c.trackDuration),this.$playBar=this.$track.find(c.trackPlayBar),this.$time=this.$track.find(c.trackCurrentTime),this},updateTimeCodes:function(){var a,b,c,d=this.player,e=mejs.Utility||mejs.Utils;if(null!==d)return a=d.options.duration>0?d.options.duration:d.media.duration,isNaN(a)||(b=e.secondsToTimeCode(a,d.options.alwaysShowHours,d.options.showTimecodeFrameCount,d.options.framesPerSecond||25),c=e.secondsToTimeCode(d.media.currentTime,d.options.alwaysShowHours||d.media.duration>3600,d.options.showTimecodeFrameCount,d.options.framesPerSecond||25),this.$duration.text(b),this.$playBar.width(d.media.currentTime/a*100+"%"),this.$time.text(c)),this}}}(this,jQuery),function(a,b,c,d){"use strict";b.extend(mejs.MepDefaults,{cuePlaylistToggle:function(a,b){a.slideToggle(200)}}),b.extend(MediaElementPlayer.prototype,{buildcueplaylisttoggle:function(a,d,e,f){var g=a.options.cueSelectors,h=b(a.container).closest(g.playlist),i=h.find(g.tracklist),j=i.is(":visible");h.addClass(function(){return j?"is-tracklist-open":"is-tracklist-closed"}),b('<div class="mejs-button mejs-toggle-playlist-button mejs-toggle-playlist"><button type="button" aria-controls="'+a.id+'" title="'+c.l10n.togglePlaylist+'"></button></div>').appendTo(a.controls).on("click",function(){var c=b(this),d=i.is(":visible");c.toggleClass("is-open",!d).toggleClass("is-closed",d),h.toggleClass("is-tracklist-open",!d).toggleClass("is-tracklist-closed",d),b.isFunction(a.options.cuePlaylistToggle)&&a.options.cuePlaylistToggle(i,a)}).addClass(function(){return j?"is-open":"is-closed"})}})}(this,jQuery,window.cue),function(a,b,c,d){"use strict";b.extend(MediaElementPlayer.prototype,{buildcueprevioustrack:function(a,d,e,f){b('<div class="mejs-button mejs-previous-button mejs-previous"><button type="button" aria-controls="'+a.id+'" title="'+c.l10n.previousTrack+'"></button></div>').appendTo(d).on("click.cue",function(){var c,d=a.cueGetCurrentTrack()||{};c=b.extend({},{currentTime:f.currentTime,duration:f.duration,src:f.src}),b(a.node).trigger("skipBack.cue",[c,d]),a.cuePlayPreviousTrack()})},cuePlayPreviousTrack:function(){var a=this,c=a.cueCurrentTrack-1<0?a.options.cuePlaylistTracks.length-1:a.cueCurrentTrack-1;b(a.node).trigger("previousTrack.cue",a),a.cueSetCurrentTrack(c)}})}(this,jQuery,window.cue);