/*!
 * jquery.cue.js - 1.2.4
 * Playlist and other functionality for MediaElement.js
 * https://audiotheme.com/
 *
 * Copyright 2014, AudioTheme LLC
 * License: MIT
 */

window.cue=window.cue||{},function(e,o,t){"use strict";var a=o(e),s=e.cue,r=MediaElementPlayer.prototype.setControlsSize;s.l10n=o.extend({nextTrack:"Next Track",previousTrack:"Previous Track",togglePlaylist:"Toggle Playlist"},s.l10n||{}),s.settings=s.settings||{},o("html").addClass(function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")?"svg":"no-svg"}),o.extend(mejs.MepDefaults,{cueDisableControlsSizing:!1,cueResponsiveProgress:!1,cueSelectors:{container:".cue-playlist-container"},cueSkin:""}),MediaElementPlayer.prototype.setControlsSize=function(){!0!==this.options.cueDisableControlsSizing&&r.call(this)},o.fn.cuePlaylist=function(n){var c=o.extend({},o.fn.cuePlaylist.defaults,n);return c.cueSelectors=o.extend({},mejs.MepDefaults.cueSelectors,{playlist:this.selector,track:".cue-track"}),"object"==typeof n&&"cueSelectors"in n&&o.extend(c.cueSelectors,n.cueSelectors),this.each(function(){var e,t,s,r=o(this),i=r.find(".cue-audio, audio").first(),a=r.find(".cue-playlist-data");if(a.length||(a=r.closest(c.cueSelectors.container).find(".cue-playlist-data")),a.length&&("signature"in(e=o.parseJSON(a.first().html()))&&(c.cueSignature=e.signature),"cueSignature"in e&&(c.cueSignature=e.cueSignature),(void 0===n||void 0===n.cuePlaylistTracks)&&"tracks"in e&&(c.cuePlaylistTracks=e.tracks)),c.cuePlaylistTracks.length){if(s=c.cuePlaylistTracks.length,r.addClass("cue-tracks-count-"+s),!i.length)for(t=0;t<s;t++)if(""!==c.cuePlaylistTracks[t].src){i=o("<audio />",{src:c.cuePlaylistTracks[t].src}).prependTo(r);break}i.mediaelementplayer(c)}})},o.fn.cuePlaylist.defaults={autosizeProgress:!1,autoRewind:!1,cuePlaylistLoop:!1,cuePlaylistTracks:[],cueSkin:"cue-skin-default",defaultAudioHeight:0,enableAutosize:!1,features:["cueartwork","cuecurrentdetails","cueprevioustrack","playpause","cuenexttrack","progress","current","duration","cueplaylist"],success:function(e,t,s){var r=o(e),i=o(s.container).closest(s.options.cueSelectors.playlist);""!==s.options.cueSkin&&s.changeSkin(s.options.cueSkin),s.options.cueResponsiveProgress&&a.on("resize.cue",function(){o(s.controls).find(".mejs-time-rail").width("100%")}).trigger("resize.cue"),o(s.node).on("loadedmetadata",function(e){!isNaN(e.target.duration)&&isFinite(e.target.duration)||o(s.container).find(".mejs-time-separator, .mejs-duration").hide()}),r.on("play.cue",function(){i.addClass("is-playing")}).on("pause.cue",function(){i.removeClass("is-playing")}),o(s.options.cueSelectors.playlist).removeClass("is-loading"),i.trigger("success.cue",[e,t,s])},timeAndDurationSeparator:'<span class="mejs-time-separator"> / </span>',timeFormat:"m:ss"}}(this,jQuery),function(e,r,t){"use strict";r.extend(MediaElementPlayer.prototype,{buildcueartwork:function(e,t,s){var i=r(s).append('<span class="mejs-track-artwork"><img src=""></span>').find(".mejs-track-artwork");r(e.node).on("setTrack.cue",function(e,t,s){var r;t.thumb=t.thumb||{},r=void 0!==t.thumb.src&&""!==t.thumb.src,i.find("img").attr("src",t.thumb.src).toggle(r),i.closest(s.options.cueSelectors.playlist).toggleClass("has-artwork",r)})}})}(0,jQuery),function(e,n,t){"use strict";n.extend(MediaElementPlayer.prototype,{buildcuecurrentdetails:function(e,t,s){var r,i,a=n(s);a.append('<div class="mejs-track-details"><span class="mejs-track-artist"></span><span class="mejs-track-title"></span></div>'),r=a.find(".mejs-track-artist"),i=a.find(".mejs-track-title"),n(e.node).on("setTrack.cue",function(e,t,s){t.meta=t.meta||{},t.title=t.title||"",r.html(t.meta.artist),i.html(t.title)})}})}(0,jQuery),function(a,e,c){"use strict";var t,o,s=MediaElementPlayer.prototype.init;function u(r,e){var i=function(e){try{var t=a[e],s="__storage_test__";return t.setItem(s,s),t.removeItem(s),!0}catch(e){return!1}}("sessionStorage")?sessionStorage:{},t=r+"-signature";this.set=function(e,t){i[r+"-"+e]=t},this.get=function(e){var t,s=r+"-"+e;return void 0!==i[s]&&(t=i[s],"currentTime"===e?t=parseFloat(t):"status"===e?t="playing"===t?"playing":"paused":"trackIndex"===e?t=parseInt(t,10):"volume"===e&&(t=parseFloat(t))),t},this.clear=function(){var e;for(e in i)i.hasOwnProperty(e)&&0===e.indexOf(r+"-")&&delete i[e]},void 0!==i[t]&&i[t]===e||this.clear(),i[t]=e}MediaElementPlayer.prototype.init=function(){var e;-1!==this.options.features.indexOf("cuehistory")&&(o=this.options.success,this.options.success=t,(e=new u(this.options.cueId||"",this.options.cueSignature||""))&&c!==e.get("volume")&&(this.options.startVolume=e.get("volume"))),s.call(this)},t=function(e,t,s){var r,i=new u(s.options.cueId||"",s.options.cueSignature||""),a="autoplay"===e.getAttribute("autoplay"),n=mejs.MediaFeatures||mejs.Features;i&&c!==i.get("volume")&&e.setVolume(i.get("volume")),i&&c!==i.get("trackIndex")&&(r="playing"===(i?i.get("status"):"")&&!n.isiOS&&!n.isAndroid&&!a,s.cueAutoResume=r,"cuePlaylistTracks"in s.options&&s.options.cuePlaylistTracks.length?s.cueSetCurrentTrack(i.get("trackIndex"),r):r&&s.cuePlay()),o.call(this,e,t,s)},e.extend(mejs.MepDefaults,{cueId:"cue",cueSignature:""}),e.extend(MediaElementPlayer.prototype,{cueHistory:null,cueAutoResume:!1,buildcuehistory:function(t,e,s,r){var i,a,n=!1,c=mejs.MediaFeatures||mejs.Features,o=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);a=t.cueHistory=new u(t.options.cueId,t.options.cueSignature),i=a.get("currentTime"),r.addEventListener("play",function(){a.set("trackIndex",t.cueCurrentTrack),a.set("status","playing")}),r.addEventListener("pause",function(){a.set("status","paused")}),r.addEventListener("timeupdate",function(){a.set("currentTime",r.currentTime)}),r.addEventListener("volumechange",function(){a.set("volume",r.volume)}),r.addEventListener("playing",function(){if(!(n||i<1)){if(c.isiOS||o)var e=setInterval(function(){i<r.buffered.end(0)&&(clearInterval(e),t.setCurrentTime(i),t.setCurrentRail())},50);else try{t.setCurrentTime(i),t.setCurrentRail()}catch(e){}n=!0}})}})}(this,jQuery),function(e,i,t){"use strict";i.extend(MediaElementPlayer.prototype,{buildcueicons:function(e,t){var s=i(e.options.cueSelectors.container).find("[data-cue-control]"),r=i(t);s.each(function(){var e=i(this);e.appendTo(r.find(e.data("cueControl")))})}})}(0,jQuery),function(e,i,a,t){"use strict";i.extend(MediaElementPlayer.prototype,{buildcuenexttrack:function(s,e,t,r){i('<div class="mejs-button mejs-next-button mejs-next"><button type="button" aria-controls="'+s.id+'" title="'+a.l10n.nextTrack+'"></button></div>').appendTo(e).on("click.cue",function(){var e,t=s.cueGetCurrentTrack()||{};e=i.extend({},{currentTime:r.currentTime,duration:r.duration,src:r.src}),i(s.node).trigger("skipNext.cue",[e,t]),s.cuePlayNextTrack()})},cuePlayNextTrack:function(){var e=this,t=e.cueCurrentTrack+1>=e.options.cuePlaylistTracks.length?0:e.cueCurrentTrack+1;i(e.node).trigger("nextTrack.cue",e),e.cueSetCurrentTrack(t)}})}(0,jQuery,window.cue),function(e,o,t){"use strict";var u,s;o.extend(mejs.MepDefaults,{cuePlaylistLoop:!1,cuePlaylistTracks:[]}),o.extend(mejs.MepDefaults.cueSelectors,{playlist:".cue-playlist",track:".cue-track",trackCurrentTime:".cue-track-current-time",trackDuration:".cue-track-duration",trackPlayBar:".cue-track-play-bar",trackProgressBar:".cue-track-progress-bar",trackSeekBar:".cue-track-seek-bar",tracklist:".cue-tracklist"}),o.extend(MediaElementPlayer.prototype,{$cueTracks:o(),cueCurrentTrack:0,buildcueplaylist:function(a,e,t,n){var c=a.options.cueSelectors,s=o(n),r=o(a.container).closest(c.playlist);a.cueSetupTracklist(),a.cueSetCurrentTrack(a.options.cuePlaylistTracks[0],!1),r.on("click.cue",c.trackSeekBar,function(e){var t=o(this),s=0<a.options.duration?a.options.duration:a.media.duration,r=(e.pageX-t.offset().left)/t.outerWidth();r=r<.2?0:r,n.setCurrentTime(r*s)}),r.on("click.cue",c.track,function(e){var t=o(this),s=a.$cueTracks.index(t),r=o(e.target),i=t.find("a, .js-disable-playpause, "+c.trackProgressBar);r.is(i)||i.find(r).length||(u.setPlayer(a).setTrack(t),a.cueCurrentTrack===s&&""!==a.options.cuePlaylistTracks[s].src?n.paused?n.play():n.pause():a.cueSetCurrentTrack(s))}),s.on("play.cue",function(){var e=a.$cueTracks.removeClass("is-playing").eq(a.cueCurrentTrack).addClass("is-playing");u.setPlayer(a).setTrack(e)}),s.on("pause.cue",function(){a.$cueTracks.removeClass("is-playing")}),s.on("timeupdate.cue",function(){u.updateTimeCodes()}),s.on("ended.cue",function(){var e=a.cueCurrentTrack+1>=a.options.cuePlaylistTracks.length?0:a.cueCurrentTrack+1;(a.options.cuePlaylistLoop||0!==e)&&setTimeout(function(){o(a.node).trigger("nextTrack.cue",a),a.cuePlayNextTrack()},250)})},cuePlay:function(){var e=this;(e.media.paused||"flash"===e.media.pluginType)&&(clearTimeout(s),s=setTimeout(function(){e.play()},50))},cueGetCurrentTrack:function(){return this.options.cuePlaylistTracks[this.cueCurrentTrack]},cueSetCurrentTrack:function(e,t){var s,r=this,i=r.options.cueSelectors;"number"==typeof e&&(r.cueCurrentTrack=e,e=r.cueGetCurrentTrack()),o(r.container).closest(i.playlist).find(i.track).removeClass("is-current").eq(r.cueCurrentTrack).addClass("is-current"),e.length&&o(r.controls).find(".mejs-duration").text(e.length),e.src&&e.src!==decodeURI(r.media.src)&&(r.pause(),r.setSrc(e.src),r.load()),s=e.title||"",o(r.media).attr("title",s),o(r.node).trigger("setTrack.cue",[e,r]),e.src&&(void 0===t||t)&&r.cuePlay()},cueSetupTracklist:function(){var s=this,e=s.options.cueSelectors,t=o(s.container).closest(e.playlist);s.$cueTracks=t.find(e.track),s.$cueTracks.filter(function(e){var t=s.options.cuePlaylistTracks[e]||{};return"src"in t&&""!==t.src}).addClass("is-playable")}}),u={player:null,$track:o(),$duration:o(),$playBar:o(),$time:o(),setPlayer:function(e){return this.player=e,this},setTrack:function(e){var t=this.player.options.cueSelectors;return this.$track=e instanceof jQuery?e:o(e),this.$duration=this.$track.find(t.trackDuration),this.$playBar=this.$track.find(t.trackPlayBar),this.$time=this.$track.find(t.trackCurrentTime),this},updateTimeCodes:function(){var e,t,s,r=this.player,i=mejs.Utility||mejs.Utils;if(null!==r)return e=0<r.options.duration?r.options.duration:r.media.duration,isNaN(e)||(t=i.secondsToTimeCode(e,r.options.alwaysShowHours,r.options.showTimecodeFrameCount,r.options.framesPerSecond||25,r.options.secondsDecimalLength||0,r.options.timeFormat||"m:ss"),s=i.secondsToTimeCode(r.media.currentTime,r.options.alwaysShowHours||3600<r.media.duration,r.options.showTimecodeFrameCount,r.options.framesPerSecond||25,r.options.secondsDecimalLength||0,r.options.timeFormat||"m:ss"),this.$duration.text(t),this.$playBar.width(r.media.currentTime/e*100+"%"),this.$time.text(s)),this}}}(0,jQuery),function(e,o,u,t){"use strict";o.extend(mejs.MepDefaults,{cuePlaylistToggle:function(e,t){e.slideToggle(200)}}),o.extend(MediaElementPlayer.prototype,{buildcueplaylisttoggle:function(s,e,t,r){var i=s.options.cueSelectors,a=o(s.container).closest(i.playlist),n=a.find(i.tracklist),c=n.is(":visible");a.addClass(function(){return c?"is-tracklist-open":"is-tracklist-closed"}),o('<div class="mejs-button mejs-toggle-playlist-button mejs-toggle-playlist"><button type="button" aria-controls="'+s.id+'" title="'+u.l10n.togglePlaylist+'"></button></div>').appendTo(s.controls).on("click",function(){var e=o(this),t=n.is(":visible");e.toggleClass("is-open",!t).toggleClass("is-closed",t),a.toggleClass("is-tracklist-open",!t).toggleClass("is-tracklist-closed",t),o.isFunction(s.options.cuePlaylistToggle)&&s.options.cuePlaylistToggle(n,s)}).addClass(function(){return c?"is-open":"is-closed"})}})}(0,jQuery,window.cue),function(e,i,a,t){"use strict";i.extend(MediaElementPlayer.prototype,{buildcueprevioustrack:function(s,e,t,r){i('<div class="mejs-button mejs-previous-button mejs-previous"><button type="button" aria-controls="'+s.id+'" title="'+a.l10n.previousTrack+'"></button></div>').appendTo(e).on("click.cue",function(){var e,t=s.cueGetCurrentTrack()||{};e=i.extend({},{currentTime:r.currentTime,duration:r.duration,src:r.src}),i(s.node).trigger("skipBack.cue",[e,t]),s.cuePlayPreviousTrack()})},cuePlayPreviousTrack:function(){var e=this,t=e.cueCurrentTrack-1<0?e.options.cuePlaylistTracks.length-1:e.cueCurrentTrack-1;i(e.node).trigger("previousTrack.cue",e),e.cueSetCurrentTrack(t)}})}(0,jQuery,window.cue);